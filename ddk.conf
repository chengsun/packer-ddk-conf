{
	"variables": {
		"host_username":  "{{env `HOST_USERNAME`}}",
		"host_password":  "{{env `HOST_PASSWORD`}}",
		"host_ip":        "{{env `HOST_IP`}}",
		"local_hostname": "{{env `LOCAL_HOSTNAME`}}",
	},
    "builders": [{
        "type": "xenserver",
        "username": "{{user `host_username`}}",
        "password": "{{user `host_password`}}",
        "host_ip": "{{user `host_ip`}}",
        "instance_name": "XenServer DDK demo",
        "instance_memory": "512000000",
        "root_disk_size": "3000000000",
        "install_timeout": "900s",
        "iso_name": "CentOS-7.0-1406-x86_64-Minimal.iso",
        "http_directory": "http",
        "http_port_min": "80",
        "http_port_max": "80",
        "ssh_username": "root",
        "ssh_password": "vmpassword",
        "boot_command": 
            [
                "<tab><wait>",
                " ks=http://{{user `local_hostname`}}:{{HTTPPort}}/ddk.ks<enter>"
            ],
		"keep_instance": "on_success"
    }],
	"provisioners": [{
		"type": "file",
		"source": "rpms",
		"destination": "/tmp"
	}, {
		"type": "shell",
		"inline": [ "yum -y install /tmp/rpms/*.rpm" ]
	}]
}
